<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Forensic Graph: Elton-2 Investigation</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/vis-network/9.1.2/standalone/umd/vis-network.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #050505; color: #fff; margin: 0; overflow: hidden; }
        #network-container { width: 100%; height: calc(100vh - 64px); background-color: #050505; }
        .vis-network:focus { outline: none; }
        
        .vercel-panel {
            background: rgba(10, 10, 10, 0.85);
            backdrop-filter: blur(16px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
        }

        .custom-scrollbar::-webkit-scrollbar { width: 4px; }
        .custom-scrollbar::-webkit-scrollbar-track { background: transparent; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: #333; border-radius: 4px; }

        .nav-btn {
            font-size: 11px; font-weight: 600; color: #888;
            padding: 6px 14px; transition: all 0.2s; border-radius: 6px;
            border: 1px solid transparent; background: transparent;
        }
        .nav-btn:hover { color: #fff; background: rgba(255,255,255,0.05); }
        .active-filter { color: #fff; background: rgba(255,255,255,0.1); border-color: rgba(255,255,255,0.2); }

        .legend-item { display: flex; align-items: center; gap: 8px; font-size: 10px; color: #aaa; margin-bottom: 6px; }
        .legend-color { width: 12px; height: 12px; border-radius: 2px; }
        
        /* –°—Ç–∏–ª–∏ –¥–ª—è –ø–æ–ª–∑—É–Ω–∫–∞ */
        input[type="range"] { accent-color: #3b82f6; }
    </style>
</head>
<body>

    <header class="h-16 border-b border-white/10 flex items-center justify-between px-6 bg-[#0a0a0a] z-30 relative">
        <div class="flex items-center space-x-6">
            <div class="flex items-center space-x-3">
                <svg width="22" height="22" viewBox="0 0 76 65" fill="#fff"><path d="M37.5274 0L75.0548 65H0L37.5274 0Z"></path></svg>
                <div class="flex flex-col">
                    <span class="text-sm font-bold tracking-widest uppercase">Forensic Radial Map</span>
                    <span class="text-[9px] text-zinc-500 uppercase tracking-widest">Elton-2 Investigation</span>
                </div>
            </div>
            
            <div class="h-6 w-px bg-white/10 mx-2"></div>
            
            <nav id="filters" class="flex space-x-1">
                <button onclick="applyFilter('profit', this)" class="nav-btn">üí∞ –í—ã—Ä—É—á–∫–∞</button>
                <button onclick="applyFilter('offshore', this)" class="nav-btn">üåç –û—Ñ—à–æ—Ä—ã</button>
                <button onclick="applyFilter('empire', this)" class="nav-btn">üè∞ –ò–º–ø–µ—Ä–∏—è</button>
                <button onclick="applyFilter('nko', this)" class="nav-btn">üõ°Ô∏è –•–∞–±—ã</button>
                <button onclick="applyFilter('transit', this)" class="nav-btn">üîÑ –¢—Ä–∞–Ω–∑–∏—Ç</button>
                <button onclick="applyFilter('record', this)" class="nav-btn">üìà –£–ö –†–µ–∫–æ—Ä–¥</button>
                <div class="h-6 w-px bg-white/10 mx-2"></div>
                <button onclick="toggleOsint(this)" class="nav-btn" id="osint-toggle">üõ∞Ô∏è OSINT</button>
                <button onclick="togglePivotLayout(this)" class="nav-btn" id="pivot-toggle">üéØ Pivot</button>
                <button onclick="toggleClusterLayout(this)" class="nav-btn" id="cluster-toggle">üß≤ –ö–ª–∞—Å—Ç–µ—Ä—ã</button>
            </nav>
        </div>
        
        <div class="flex items-center space-x-3">
            <!-- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–ª–∏–Ω–æ–π –ª—É—á–∞ (–ø—Ä—É–∂–∏–Ω—ã) -->
            <div class="flex items-center space-x-2 bg-black border border-white/20 rounded-md px-3 py-2 hidden lg:flex">
                <label for="springLength" class="text-[9px] text-zinc-500 uppercase tracking-widest cursor-pointer" title="–î–ª–∏–Ω–∞ —Å–≤—è–∑–µ–π –º–µ–∂–¥—É —É–∑–ª–∞–º–∏">–†–∞–¥–∏—É—Å:</label>
                <input type="range" id="springLength" min="30" max="350" value="130" class="w-24 h-1 bg-zinc-700 rounded-lg appearance-none cursor-pointer">
            </div>

            <div class="relative">
                <input type="text" id="node-search" placeholder="–ü–æ–∏—Å–∫ –æ–±—ä–µ–∫—Ç–∞..." 
                    class="bg-black border border-white/20 rounded-md px-4 py-2 text-xs text-white focus:border-blue-500 outline-none w-64 transition-all focus:ring-1 focus:ring-blue-500">
            </div>
            <button onclick="resetView()" class="bg-white text-black px-4 py-2 rounded-md text-[11px] font-bold uppercase hover:bg-zinc-200 transition-colors shadow-lg">–°–±—Ä–æ—Å</button>
        </div>
    </header>

    <main class="relative">
        <div id="network-container"></div>

        <!-- –ê–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–π –æ—Ç—á–µ—Ç -->
        <div id="analytic-report" class="absolute top-6 left-6 w-80 vercel-panel p-5 hidden z-40 rounded-xl">
            <div class="flex justify-between items-start mb-3">
                <h3 id="report-title" class="text-xs font-bold text-white uppercase tracking-widest"></h3>
                <button onclick="closeReport()" class="text-zinc-500 hover:text-white transition-colors">&times;</button>
            </div>
            <p id="report-text" class="text-[11px] text-zinc-400 leading-relaxed mb-4"></p>
            <div id="report-nodes" class="space-y-1.5 max-h-64 overflow-y-auto custom-scrollbar pr-2"></div>
        </div>

        <!-- –õ–µ–≥–µ–Ω–¥–∞ -->
        <div class="absolute bottom-6 left-6 vercel-panel p-4 z-30 rounded-xl">
            <h4 class="text-[9px] font-bold text-white uppercase tracking-widest mb-3 opacity-80">–¢–∏–ø—ã –æ–±—ä–µ–∫—Ç–æ–≤</h4>
            <div class="legend-item"><div class="legend-color bg-red-600 rounded-full"></div> –ë–∞–Ω–∫—Ä–æ—Ç (–î–æ–ª–∂–Ω–∏–∫)</div>
            <div class="legend-item"><div class="legend-color bg-emerald-500"></div> –ö–æ–º–º–µ—Ä—á–µ—Å–∫–∞—è –∫–æ–º–ø–∞–Ω–∏—è</div>
            <div class="legend-item"><div class="legend-color bg-amber-500"></div> –û—Ñ—à–æ—Ä–Ω–∞—è –∫–æ–º–ø–∞–Ω–∏—è</div>
            <div class="legend-item"><div class="legend-color bg-purple-600" style="transform: rotate(45deg); width: 10px; height: 10px; margin: 1px;"></div> –ù–ö–û / –§–∏–Ω–∞–Ω—Å–æ–≤—ã–π —Ö–∞–±</div>
            <div class="legend-item"><div class="legend-color bg-blue-500 rounded-full"></div> –ö–ª—é—á–µ–≤–æ–µ —Ñ–∏–∑–ª–∏—Ü–æ</div>
            <div class="legend-item"><div class="legend-color bg-slate-500 rounded-full w-2 h-2 ml-0.5"></div> –î—Ä–æ–ø / –¢—Ä–∞–Ω–∑–∏—Ç</div>
            
            <h4 class="text-[9px] font-bold text-white uppercase tracking-widest mt-4 mb-2 opacity-80">–¢–∏–ø—ã —Å–≤—è–∑–µ–π</h4>
            <div class="legend-item"><div class="w-4 h-0.5 bg-emerald-500"></div> –§–∏–Ω–∞–Ω—Å—ã / –í—ã—Ä—É—á–∫–∞</div>
            <div class="legend-item"><div class="w-4 h-0.5 bg-amber-500"></div> –î–æ–ª–≥ / –ó–∞–µ–º / –¶–µ—Å—Å–∏—è</div>
            <div class="legend-item"><div class="w-4 h-0.5 bg-red-500"></div> –°—É–¥—ã / –ò—Å–∫–∏</div>
            <div class="legend-item"><div class="w-4 h-0.5 bg-zinc-500 border-t border-dashed border-zinc-500" style="background:transparent; height:1px;"></div> –ù–æ–º–∏–Ω–∞–ª—å–Ω–∞—è —Å–≤—è–∑—å</div>

            <h4 class="text-[9px] font-bold text-white uppercase tracking-widest mt-4 mb-2 opacity-80">OSINT (SpiderFoot)</h4>
            <div class="legend-item"><div class="legend-color bg-cyan-600 rounded-full"></div> IP-–∞–¥—Ä–µ—Å</div>
            <div class="legend-item"><div class="legend-color bg-sky-600 rounded-full"></div> –î–æ–º–µ–Ω / DNS</div>
            <div class="legend-item"><div class="legend-color bg-indigo-600 rounded-full"></div> ASN</div>
            <div class="legend-item"><div class="legend-color bg-teal-600 rounded-full"></div> Email</div>
            <div class="legend-item"><div class="legend-color bg-emerald-600 rounded-full"></div> URL</div>
        </div>

        <!-- –ö–∞—Ä—Ç–æ—á–∫–∞ –æ–±—ä–µ–∫—Ç–∞ -->
        <div id="info-sidebar" class="absolute top-6 right-6 w-96 vercel-panel hidden z-40 rounded-xl flex flex-col max-h-[85vh] overflow-hidden transform transition-all">
            <div class="p-5 border-b border-white/10 flex justify-between items-start bg-white/5">
                <div id="sidebar-header"></div>
                <button onclick="closeSidebar()" class="text-zinc-500 hover:text-white transition-colors text-xl leading-none">&times;</button>
            </div>
            <div id="info-content" class="p-5 overflow-y-auto custom-scrollbar flex-1 font-light text-zinc-300 text-xs leading-relaxed"></div>
        </div>
    </main>

    <script src="./sf_data_anchor_evidence.js"></script>
    <script>
        // –ò–°–•–û–î–ù–´–ï –î–ê–ù–ù–´–ï (–ë–µ–∑ –ø–µ—Ä–∏—Ñ–µ—Ä–∏–∏ –®–º–∞–ª—è, —Å–≤–æ–±–æ–¥–Ω—ã–π —Ä–∞–¥–∏–∞–ª—å–Ω—ã–π –ª–µ–π–∞—É—Ç)
        const baseNodesData = [
            // –Ø–¥—Ä–æ –∏ –ë–µ–Ω–µ—Ñ–∏—Ü–∏–∞—Ä—ã
            { id: 'SE2', label: '–û–û–û –°–∞–Ω–∞—Ç–æ—Ä–∏–π\n–≠–ª—å—Ç–æ–Ω-2', group: 'bankrupt', info: '–î–û–õ–ñ–ù–ò–ö. –ê–∫–∫—É–º—É–ª—è—Ç–æ—Ä –º–ª—Ä–¥ –¥–æ–ª–≥–æ–≤.', pattern: 'core' },
            { id: 'KHAR', label: '–•–∞—Ä—á–µ–Ω–∫–æ –°. –í.', group: 'official', info: '–ö–æ–Ω–∫—É—Ä—Å–Ω—ã–π —É–ø—Ä–∞–≤–ª—è—é—â–∏–π.', pattern: 'core' },
            { id: 'MIKHEEV', label: '–ú–∏—Ö–µ–µ–≤ –°. –ò.', group: 'person', info: '–ú–∏–Ω–æ—Ä–∏—Ç–∞—Ä–Ω—ã–π —É—á—Ä–µ–¥–∏—Ç–µ–ª—å (15%).', pattern: 'core' },
            { id: 'CH_L', label: '–ß—É–≥—É–Ω–æ–≤ –õ. –°.', group: 'person', info: '–ú–∞–∂–æ—Ä–∏—Ç–∞—Ä–Ω—ã–π —É—á—Ä–µ–¥–∏—Ç–µ–ª—å (85%) –¥–æ–ª–∂–Ω–∏–∫–∞.', pattern: 'empire' },
            { id: 'SHMAL', label: '–®–º–∞–ª—å –ì. –ò.', group: 'person', info: '–ê–∫—Ü–∏–æ–Ω–µ—Ä –ù–ü–ó. –í–ª–∏—è—Ç–µ–ª—å–Ω–∞—è —Ñ–∏–≥—É—Ä–∞.', pattern: 'empire' },
            { id: 'BEREZIN', label: '–ë–µ—Ä–µ–∑–∏–Ω –û. –ì.', group: 'person', info: '–°–≤—è–∑–∞–Ω —Å –û–û–û –°–∞–Ω–∞—Ç–æ—Ä–∏–π –≠–ª—å—Ç–æ–Ω-2 (–≤ –ø—Ä–æ—à–ª–æ–º).', pattern: 'core' },

            // –í—ã—Ä—É—á–∫–∞
            { id: 'EM', label: '–û–û–û –≠–ª—å—Ç–æ–Ω-–ú–µ–¥', group: 'company', info: '–ö–æ–º–ø–∞–Ω–∏—è-–ø—ã–ª–µ—Å–æ—Å. –ß–∏—Å—Ç–∞—è –ø—Ä–∏–±—ã–ª—å 2024: 80.7 –º–ª–Ω.', pattern: 'profit' },
            { id: 'BA_I', label: '–ë–∞–≥—Ä–æ–≤–∞ –ò. –ê.', group: 'person', info: '–°—É–ø—Ä—É–≥–∞ –ß—É–≥—É–Ω–æ–≤–∞ –õ.–°. –ù–æ–º–∏–Ω–∞–ª –≠–ª—å—Ç–æ–Ω-–ú–µ–¥.', pattern: 'profit' },
            { id: 'CONF', label: '–û–û–û –ö–æ–Ω—Ñ–µ—Ç—Ç–∏', group: 'company', info: '–°–≤—è–∑–∞–Ω–∞ —á–µ—Ä–µ–∑ –ë–∞–≥—Ä–æ–≤—É –ò.–ê.', pattern: 'profit' },
            { id: 'ALT', label: '–ê–ª—Ç—É—Ö–æ–≤ –î. –ù.', group: 'person', info: '–≠–∫—Å-–¥–∏—Ä–µ–∫—Ç–æ—Ä –≠–ª—å—Ç–æ–Ω-–ú–µ–¥.', pattern: 'profit' },
            { id: 'MISYURINA', label: '–ú–∏—Å—é—Ä–∏–Ω–∞ –õ. –ê.', group: 'person', info: '–î–∏—Ä–µ–∫—Ç–æ—Ä —Ñ–∏–ª–∏–∞–ª–∞ –≠–ª—å—Ç–æ–Ω-–ú–µ–¥.', pattern: 'profit' },

            // –û—Ñ—à–æ—Ä—ã
            { id: 'CH_A_P', label: '–ß—É–≥—É–Ω–æ–≤ –ê. –í.', group: 'person', info: '–ü–ª–µ–º—è–Ω–Ω–∏–∫. –ë—ã–≤—à–∏–π 100% –≤–ª–∞–¥–µ–ª–µ—Ü –≠–ª—å—Ç–æ–Ω-–ú–µ–¥.', pattern: 'offshore' },
            { id: 'MOBRAY', label: 'MOBRAY (–ö–∏–ø—Ä)', group: 'offshore', info: '–û—Ñ—à–æ—Ä. –§–∏–∫—Ç–∏–≤–Ω—ã–µ –∑–∞–π–º—ã.', pattern: 'offshore' },
            { id: 'FINWAY', label: 'FINWAY (–ì–æ–Ω–∫–æ–Ω–≥)', group: 'offshore', info: '–û—Ñ—à–æ—Ä. –§–∏–∫—Ç–∏–≤–Ω–∞—è –∑–∞–¥–æ–ª–∂–µ–Ω–Ω–æ—Å—Ç—å.', pattern: 'offshore' },
            { id: 'MARSTEEL', label: 'MARSTEEL (–ë–í–û)', group: 'offshore', info: '–£—á–∞—Å—Ç–∏–µ –≤ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —É–±—ã—Ç–∫–æ–≤.', pattern: 'offshore' },
            { id: 'PEREYRA', label: 'PEREYRA (–ë–í–û)', group: 'offshore', info: '–§–∏–∫—Ç–∏–≤–Ω—ã–π —Ü–µ—Å—Å–∏–æ–Ω–∞—Ä–∏–π.', pattern: 'offshore' },
            { id: 'KOL', label: '–ö–æ–ª–µ—Å–Ω–∏–∫–æ–≤ –ì. –í.', group: 'person', info: '–î–∏—Ä–µ–∫—Ç–æ—Ä —Å 2020 –≥. –ù–æ–º–∏–Ω–∞–ª-—Ç—Ä–∞–Ω–∑–∏—Ç–µ—Ä.', pattern: 'offshore' },
            { id: 'SAMOROGDA', label: '–°–ê–ú–û–†–û–ì–î–ê', group: 'company', info: '–ö–†–û–°–°-–°–í–Ø–ó–¨: –Ω–æ–º–∏–Ω–∞–ª –ö–æ–ª–µ—Å–Ω–∏–∫–æ–≤ –∏ –Ω–æ–º–∏–Ω–∞–ª –ó–∞—Ö–∞—Ä–æ–≤–∞.', pattern: 'offshore' },
            { id: 'VOLGASITY', label: '–†–∏—ç–ª—Ç –í–æ–ª–≥–∞—Å–∏—Ç–∏', group: 'company', info: '–ù–µ–¥–µ–π—Å—Ç–≤—É—é—â–∞—è. –°–≤—è–∑–∞–Ω–∞ —Å –ö–æ–ª–µ—Å–Ω–∏–∫–æ–≤—ã–º.', pattern: 'offshore' },
            { id: 'SOGLASIE', label: '–û–û–û –°–æ–≥–ª–∞—Å–∏–µ', group: 'company', info: '–ù–µ–¥–µ–π—Å—Ç–≤—É—é—â–∞—è. –°–≤—è–∑–∞–Ω–∞ —Å –ö–æ–ª–µ—Å–Ω–∏–∫–æ–≤—ã–º.', pattern: 'offshore' },

            // –ò–º–ø–µ—Ä–∏—è –ß—É–≥—É–Ω–æ–≤–∞ –∏ –∞–∫—Ç–∏–≤—ã
            { id: 'NPZ', label: '–û–û–û –Æ–∂–Ω–æ—Ä—É—Å—Å–∫–∏–π\n–ù–ü–ó', group: 'company', info: '–ù–µ—Ñ—Ç—è–Ω–æ–π –±–∏–∑–Ω–µ—Å —Å–µ–º—å–∏.', pattern: 'empire' },
            { id: 'OAO_NPZ', label: '–û–ê–û –Æ–∂–Ω–æ—Ä—É—Å—Å–∫–∏–π\n–ù–ü–ó', group: 'company', info: '–ù–µ–¥–µ–π—Å—Ç–≤—É—é—â–µ–µ —é—Ä–ª–∏—Ü–æ (–ø—Ä–µ–¥—à–µ—Å—Ç–≤–µ–Ω–Ω–∏–∫ –û–û–û –ù–ü–ó).', pattern: 'empire' },
            { id: 'PASS', label: '–ü–∞—Å—Å–∞–∂ –û–∫—Ç. –ü–æ–ª–µ', group: 'company', info: '–•–∞–± –ø–µ—Ä–µ–∫–∞—á–∫–∏ —Å—Ä–µ–¥—Å—Ç–≤ –≤ –ù–ö–û.', pattern: 'empire' },
            { id: 'REV', label: '–¢–°–ù –†–µ–≤—å–µ—Ä–∞', group: 'company', info: '–≠–ª–∏—Ç–Ω—ã–π –ø–æ—Å–µ–ª–æ–∫.', pattern: 'empire' },
            { id: 'MED_SRV', label: '–ï–≤—Ä–æ–º–µ–¥—Å–µ—Ä–≤–∏—Å', group: 'company', info: '–ú–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–π —Ü–µ–Ω—Ç—Ä.', pattern: 'empire' },
            { id: 'CSL', label: '–ß–°–õ', group: 'company', info: '–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω–∞—è –∫–æ–º–ø–∞–Ω–∏—è.', pattern: 'empire' },
            { id: 'BAZHENOV', label: '–ë–∞–∂–µ–Ω–æ–≤ –ê. –í.', group: 'person', info: '–°–æ—É—á—Ä–µ–¥–∏—Ç–µ–ª—å –¢–°–ù –ò—Å—Ç—å–∏–Ω—Å–∫–∞—è –†–µ–≤—å–µ—Ä–∞.', pattern: 'empire' },
            { id: 'ANDRAZ', label: '–ê–Ω–¥—Ä–∞–∑–∞—à–≤–∏–ª–∏ –®. –ò.', group: 'person', info: '–°–æ—É—á—Ä–µ–¥–∏—Ç–µ–ª—å –¢–°–ù.', pattern: 'empire' },
            { id: 'DRB', label: '–û–û–û –î–†–ë', group: 'company', info: '–°–≤—è–∑—å —Å –ß—É–≥—É–Ω–æ–≤—ã–º –õ.–°.', pattern: 'empire' },
            { id: 'SITE', label: '–ó–ê–û –°–ò–¢–ï', group: 'company', info: '–°–≤—è–∑—å —Å –ß—É–≥—É–Ω–æ–≤—ã–º –õ.–°.', pattern: 'empire' },
            { id: 'HERCULES_OAO', label: '–û–ê–û –ì–ï–†–ö–£–õ–ï–°', group: 'company', info: '–°–≤—è–∑—å —Å –ß—É–≥—É–Ω–æ–≤—ã–º –õ.–°.', pattern: 'empire' },
            { id: 'HERCULES_OOO', label: '–û–û–û –ì–ï–†–ö–£–õ–ï–°', group: 'company', info: '–°–≤—è–∑—å —Å –ß—É–≥—É–Ω–æ–≤—ã–º –õ.–°.', pattern: 'empire' },
            { id: 'MARYINA_ROSCHA', label: '–û–û–û –ú–∞—Ä—å–∏–Ω–∞ –†–æ—â–∞', group: 'company', info: '–°–≤—è–∑—å —Å –ß—É–≥—É–Ω–æ–≤—ã–º –õ.–°.', pattern: 'empire' },
            { id: 'AGRO_SELO', label: '–°—Ç–∞—Ä–æ–µ –°–µ–ª–æ', group: 'company', info: '–°–≤—è–∑–∞–Ω–æ —Å –ß—É–≥—É–Ω–æ–≤—ã–º –ê.–í.', pattern: 'empire' },

            // –ù–ö–û, –•–∞–±—ã –∏ –ë–æ–≥–¥–∞–Ω–æ–≤
            { id: 'BOGD', label: '–ë–æ–≥–¥–∞–Ω–æ–≤ –ê. –í.', group: 'person', info: '–≠–∫—Å-–¥–∏—Ä–µ–∫—Ç–æ—Ä. –Ø–≤–∫–∞ —Å –ø–æ–≤–∏–Ω–Ω–æ–π.', pattern: 'nko' },
            { id: 'ZAKH', label: '–ó–∞—Ö–∞—Ä–æ–≤–∞ –ï. –ê.', group: 'person', info: '–ù–æ–º–∏–Ω–∞–ª—å–Ω—ã–π –¥–∏—Ä–µ–∫—Ç–æ—Ä.', pattern: 'nko' },
            { id: 'BARS', label: '–û–û–û –ë–∞—Ä—Å', group: 'company', info: '–ù–µ–¥–µ–π—Å—Ç–≤—É—é—â–∞—è. –°–≤—è–∑–∞–Ω–æ —Å –ó–∞—Ö–∞—Ä–æ–≤–æ–π –ï.–ê.', pattern: 'nko' },
            { id: 'CHURCH', label: '–ü—Ä–∏—Ö–æ–¥ –•—Ä–∞–º–∞', group: 'hub', info: '–†–µ–ª–∏–≥–∏–æ–∑–Ω—ã–π —â–∏—Ç.', pattern: 'nko' },
            { id: 'KAZANOV', label: '–ö–∞–∑–∞–Ω–æ–≤ –ù. –õ.', group: 'person', info: '–°–æ—É—á—Ä–µ–¥–∏—Ç–µ–ª—å –ø—Ä–∏—Ö–æ–¥–∞ –•—Ä–∞–º–∞.', pattern: 'nko' },
            { id: 'MEGAPIR', label: '–ê–°–°–û–¶. –ú–ï–ì–ê–ü–ò–†', group: 'hub', info: '–ú–µ–≥–∞-—Ö–∞–± —Ñ–æ–Ω–¥–æ–≤.', pattern: 'nko' },
            { id: 'KANSHIN', label: '–ö–∞–Ω—å—à–∏–Ω –ê. –ê.', group: 'person', info: '–ì–µ–Ω–¥–∏—Ä–µ–∫—Ç–æ—Ä –ê—Å—Å–æ—Ü–∏–∞—Ü–∏–∏ –ú–µ–≥–∞–ø–∏—Ä.', pattern: 'nko' },
            { id: 'CLUB_VISTREL', label: '–ö–ª—É–± –í—ã—Å—Ç—Ä–µ–ª', group: 'hub', info: '–°–≤—è–∑–∞–Ω–æ —Å –ë–æ–≥–¥–∞–Ω–æ–≤—ã–º –ê.–í.', pattern: 'nko' },
            { id: 'FOND_NEVSKY', label: '–§–æ–Ω–¥ –ê. –ù–µ–≤—Å–∫–∏–π', group: 'hub', info: '–°–≤—è–∑–∞–Ω–æ —Å –ë–æ–≥–¥–∞–Ω–æ–≤—ã–º –ê.–í.', pattern: 'nko' },
            { id: 'DVORYANSTVO', label: '–î–≤–æ—Ä—è–Ω—Å–∫–æ–µ\n—Å–æ–±—Ä–∞–Ω–∏–µ', group: 'hub', info: '–°–≤—è–∑–∞–Ω–æ —Å –ë–æ–≥–¥–∞–Ω–æ–≤—ã–º –ê.–í.', pattern: 'nko' },
            { id: 'ROMANOV', label: '–ö–æ–º–∏—Ç–µ—Ç –†–æ–º–∞–Ω–æ–≤—ã—Ö', group: 'hub', info: '–°–≤–µ—Ç—Å–∫–∞—è –ù–ö–û.', pattern: 'nko' },
            { id: 'IZUMRUD', label: '–¢–°–ñ –ò–∑—É–º—Ä—É–¥', group: 'hub', info: '–°–≤—è–∑–∞–Ω–æ —á–µ—Ä–µ–∑ –ë–æ–≥–¥–∞–Ω–æ–≤—É.', pattern: 'nko' },
            { id: 'BOGD_V', label: '–ë–æ–≥–¥–∞–Ω–æ–≤–∞ –í. –î.', group: 'person', info: '–°—É–ø—Ä—É–≥–∞ –ë–æ–≥–¥–∞–Ω–æ–≤–∞ –ê.–í.', pattern: 'nko' },
            { id: 'TASM', label: '–û–û–û –¢–ê–°–ú', group: 'company', info: '–°–≤—è–∑–∞–Ω–æ —Å –ë–æ–≥–¥–∞–Ω–æ–≤–æ–π –í.–î.', pattern: 'nko' },
            { id: 'AUTOPLUS', label: '–û–û–û –ê–≤—Ç–æ–ø–ª—é—Å', group: 'company', info: '–ù–µ–¥–µ–π—Å—Ç–≤—É—é—â–∞—è.', pattern: 'nko' },
            { id: 'VNGS', label: '–û–û–û –í–ù–ì–°', group: 'company', info: '–°–≤—è–∑–∞–Ω–æ —Å –ë–æ–≥–¥–∞–Ω–æ–≤—ã–º –ê.–í.', pattern: 'nko' },
            { id: 'SOLDIER_H', label: '–î–æ–º —Å–æ–ª–¥–∞—Ç–∞', group: 'hub', info: '–ù–ö–û. –í—Ö–æ–¥–∏—Ç –≤ —Å–µ—Ç—å –ú–µ–≥–∞–ø–∏—Ä.', pattern: 'nko' },
            { id: 'ARMY_CULT', label: '–ê—Ä–º–∏—è –∏ –∫—É–ª—å—Ç—É—Ä–∞', group: 'hub', info: '–ù–ö–û. –í—Ö–æ–¥–∏—Ç –≤ —Å–µ—Ç—å –ú–µ–≥–∞–ø–∏—Ä.', pattern: 'nko' },
            { id: 'DKM1', label: '–û–û–û –î–ö–ú-1', group: 'company', info: '–í—Ö–æ–¥–∏—Ç –≤ —Å–µ—Ç—å –ú–µ–≥–∞–ø–∏—Ä.', pattern: 'nko' },
            { id: 'PERSPEKTIVA', label: '–û–û–û –ü–µ—Ä—Å–ø–µ–∫—Ç–∏–≤–∞', group: 'company', info: '–í—Ö–æ–¥–∏—Ç –≤ —Å–µ—Ç—å –ú–µ–≥–∞–ø–∏—Ä.', pattern: 'nko' },
            { id: 'OF_BRATSTVO', label: '–§–æ–Ω–¥ –û—Ñ–∏—Ü–µ—Ä—Å–∫–æ–µ\n–±—Ä–∞—Ç—Å—Ç–≤–æ', group: 'hub', info: '–í—Ö–æ–¥–∏—Ç –≤ —Å–µ—Ç—å –ú–µ–≥–∞–ø–∏—Ä.', pattern: 'nko' },
            { id: 'ID_MEGAPIR', label: '–ò–î –ú–µ–≥–∞–ø–∏—Ä', group: 'company', info: '–í—Ö–æ–¥–∏—Ç –≤ —Å–µ—Ç—å –ú–µ–≥–∞–ø–∏—Ä.', pattern: 'nko' },
            { id: 'MEGAPIR_PLUS', label: '–ú–µ–≥–∞–ø–∏—Ä-–ü–ª—é—Å', group: 'company', info: '–í—Ö–æ–¥–∏—Ç –≤ —Å–µ—Ç—å –ú–µ–≥–∞–ø–∏—Ä.', pattern: 'nko' },

            // –¢—Ä–∞–Ω–∑–∏—Ç –∏ –û–±–Ω–∞–ª
            { id: 'RECORD', label: '–£–ö –†–µ–∫–æ—Ä–¥ –ö–∞–ø–∏—Ç–∞–ª', group: 'company', info: '–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ç—å—é —Ç—Ä–∞–Ω–∑–∏—Ç–∞.', pattern: 'record' },
            { id: 'ANDREEV', label: '–ê–Ω–¥—Ä–µ–µ–≤ –Æ. –í.', group: 'person', info: '–ö—É—Ä–∞—Ç–æ—Ä —Å–µ—Ç–∏ –û—Ä–∏–æ–Ω, –ó–∞—Ä—è, –ö–∞—Å–∫–∞–¥.', pattern: 'record' },
            { id: 'IVANCH', label: '–ò–≤–∞–Ω—á–µ–Ω–∫–æ –ö. –ò.', group: 'person', info: '–ö—É—Ä–∞—Ç–æ—Ä —Å–µ—Ç–∏ –ú–µ—Ç—Ä–æ, –ï–≤—Ä–æ –°–µ—Ä–≤–∏—Å.', pattern: 'record' },
            { id: 'ORION', label: '–û–û–û –û—Ä–∏–æ–Ω', group: 'transit', info: '–¢—Ä–∞–Ω–∑–∏—Ç.', pattern: 'record' },
            { id: 'ZARYA', label: '–û–û–û –ó–∞—Ä—è', group: 'transit', info: '–¢—Ä–∞–Ω–∑–∏—Ç.', pattern: 'record' },
            { id: 'METRO', label: '–û–û–û –ú–µ—Ç—Ä–æ', group: 'transit', info: '–¢—Ä–∞–Ω–∑–∏—Ç.', pattern: 'record' },
            { id: 'KASCAD', label: '–û–û–û –ö–∞—Å–∫–∞–¥', group: 'transit', info: '–¢—Ä–∞–Ω–∑–∏—Ç.', pattern: 'record' },
            { id: 'EURO_SRV', label: '–ï–≤—Ä–æ –°–µ—Ä–≤–∏—Å', group: 'transit', info: '–¢—Ä–∞–Ω–∑–∏—Ç.', pattern: 'record' },
            { id: 'SOLOMATINA', label: '–°–æ–ª–æ–º–∞—Ç–∏–Ω–∞ –¢. –ü.', group: 'person', info: '–ì–ª–∞–≤–±—É—Ö (–æ–±–Ω–∞–ª).', pattern: 'transit' },
            { id: 'NYRKOVA', label: '–ù—ã—Ä–∫–æ–≤–∞ –Ø. –ê.', group: 'person', info: '–ì–ª–∞–≤–±—É—Ö.', pattern: 'transit' },
            { id: 'TSAPINA', label: '–¶–∞–ø–∏–Ω–∞ –°. –í.', group: 'transit', info: '–î—Ä–æ–ø.', pattern: 'transit' },
            { id: 'LUEVA', label: '–õ—É–µ–≤–∞ –ò. –ü.', group: 'transit', info: '–î—Ä–æ–ø.', pattern: 'transit' },
            { id: 'FROLOV_L', label: '–§—Ä–æ–ª–æ–≤ –õ. –ò.', group: 'transit', info: '–î—Ä–æ–ø.', pattern: 'transit' },
            { id: 'FROLOV_A', label: '–§—Ä–æ–ª–æ–≤ –ê. –ê.', group: 'transit', info: '–î—Ä–æ–ø.', pattern: 'transit' },
            { id: 'SETSKO', label: '–°–µ—Ü–∫–æ –ù. –ù.', group: 'transit', info: '–î—Ä–æ–ø.', pattern: 'transit' },
            { id: 'KABLOV', label: '–ö–∞–±–ª–æ–≤ –ü. –ê.', group: 'transit', info: '–î—Ä–æ–ø.', pattern: 'transit' },
            { id: 'TIMAKOV', label: '–¢–∏–º–∞–∫–æ–≤ –ê. –°.', group: 'transit', info: '–î—Ä–æ–ø.', pattern: 'transit' },
            { id: 'IP_BIT', label: '–ò–ü –ë–∏—Ç—é–∫–æ–≤ –ï.–ò.', group: 'transit', info: '–ö–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç.', pattern: 'transit' },
            { id: 'IP_SUL', label: '–ò–ü –°—É–ª–∞–º–∞–Ω–∏–¥–∑–µ', group: 'transit', info: '–ö–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç.', pattern: 'transit' },
            { id: 'TAKTIKA', label: '–¢–∞–∫—Ç–∏–∫–∞-–ê—É–¥–∏—Ç', group: 'company', info: '–°–æ–∫—Ä—ã—Ç–∏–µ –±–∞–∑ 1–°.', pattern: 'transit' },
            { id: 'BYSTROVA', label: '–ë—ã—Å—Ç—Ä–æ–≤–∞ –û. –Æ.', group: 'person', info: '–£—á—Ä–µ–¥–∏—Ç–µ–ª—å –¢–∞–∫—Ç–∏–∫–∞-–ê—É–¥–∏—Ç.', pattern: 'transit' },

            // –ú–∞—Å—Å–æ–≤–∫–∞ –Ω–æ–º–∏–Ω–∞–ª–æ–≤ –û–û–û –°–ê–ú–û–†–û–ì–î–ê
            { id: 'PROKHIM', label: '–ü—Ä–æ—Ö–∏–º –ï. –ê.', group: 'transit', info: '–°–≤—è–∑—å —Å –û–û–û –°–ê–ú–û–†–û–ì–î–ê.', pattern: 'offshore' },
            { id: 'ZEYNALOV', label: '–ó–µ–π–Ω–∞–ª–æ–≤ –†. –ú.', group: 'transit', info: '–°–≤—è–∑—å —Å –û–û–û –°–ê–ú–û–†–û–ì–î–ê.', pattern: 'offshore' },
            { id: 'TARASENKO', label: '–¢–∞—Ä–∞—Å–µ–Ω–∫–æ –í. –ì.', group: 'transit', info: '–°–≤—è–∑—å —Å –û–û–û –°–ê–ú–û–†–û–ì–î–ê.', pattern: 'offshore' },
            { id: 'POLEVA', label: '–ü–æ–ª–µ–≤–∞ –ï. –°.', group: 'transit', info: '–°–≤—è–∑—å —Å –û–û–û –°–ê–ú–û–†–û–ì–î–ê.', pattern: 'offshore' },
            { id: 'GONCHAROV', label: '–ì–æ–Ω—á–∞—Ä–æ–≤ –°. –í.', group: 'transit', info: '–°–≤—è–∑—å —Å –û–û–û –°–ê–ú–û–†–û–ì–î–ê.', pattern: 'offshore' },
            { id: 'SHEVELEVA', label: '–®–µ–≤–µ–ª–µ–≤–∞ –ò. –ë.', group: 'transit', info: '–°–≤—è–∑—å —Å –û–û–û –°–ê–ú–û–†–û–ì–î–ê.', pattern: 'offshore' },
            { id: 'BELOUSOVA', label: '–ë–µ–ª–æ—É—Å–æ–≤–∞ –ê. –§.', group: 'transit', info: '–°–≤—è–∑—å —Å –û–û–û –°–ê–ú–û–†–û–ì–î–ê.', pattern: 'offshore' },

            // –ü–µ—Ä–∏—Ñ–µ—Ä–∏—è –ë–æ–≥–¥–∞–Ω–æ–≤–∞ –ê.–í.
            { id: 'SIZOV', label: '–°–∏–∑–æ–≤ –Æ. –ò.', group: 'person', info: '–°–≤—è–∑—å —Å –ö–æ–º–∏—Ç–µ—Ç–æ–º –†–æ–º–∞–Ω–æ–≤—ã—Ö.', pattern: 'nko' },
            { id: 'MEKHANIKOV', label: '–ú–µ—Ö–∞–Ω–∏–∫–æ–≤ –í. –ú.', group: 'person', info: '–°–≤—è–∑—å —Å –ö–æ–º–∏—Ç–µ—Ç–æ–º –†–æ–º–∞–Ω–æ–≤—ã—Ö.', pattern: 'nko' },
            { id: 'KHIMCHENKO', label: '–•–∏–º—á–µ–Ω–∫–æ –í. –ò.', group: 'person', info: '–°–≤—è–∑—å —Å –û–û–û –í–ù–ì–°.', pattern: 'nko' },
            { id: 'KOVALEV', label: '–ö–æ–≤–∞–ª–µ–≤ –ê. –í.', group: 'person', info: '–°–≤—è–∑—å —Å –û–û–û –í–ù–ì–°.', pattern: 'nko' },
            { id: 'VORONINA', label: '–í–æ—Ä–æ–Ω–∏–Ω–∞ –¢. –Æ.', group: 'person', info: '–°–≤—è–∑—å —Å –û–û–û –í–ù–ì–°.', pattern: 'nko' },
            { id: 'BESSUDNOV', label: '–ë–µ—Å—Å—É–¥–Ω–æ–≤ –ê. –í.', group: 'person', info: '–°–≤—è–∑—å —Å –ö–ª—É–±–æ–º –í—ã—Å—Ç—Ä–µ–ª.', pattern: 'nko' },

            // –ú–∞—Å—Å–æ–≤–∫–∞ –•—Ä–∞–º–∞ –∏ –ù–ü–ó
            { id: 'ZHEBELEV', label: '–ñ–µ–±–µ–ª–µ–≤ –í. –ê.', group: 'transit', info: '–ü—Ä–∏—Ö–æ–¥ –•—Ä–∞–º–∞.', pattern: 'nko' },
            { id: 'TYUTYUNNIKOV', label: '–¢—é—Ç—é–Ω–Ω–∏–∫–æ–≤ –ï.', group: 'transit', info: '–ü—Ä–∏—Ö–æ–¥ –•—Ä–∞–º–∞.', pattern: 'nko' },
            { id: 'PETROV', label: '–ü–µ—Ç—Ä–æ–≤ –ê. –ò.', group: 'transit', info: '–ü—Ä–∏—Ö–æ–¥ –•—Ä–∞–º–∞.', pattern: 'nko' },
            { id: 'KURZONOVA', label: '–ö—É—Ä–∑–æ–Ω–æ–≤–∞ –õ.', group: 'transit', info: '–ü—Ä–∏—Ö–æ–¥ –•—Ä–∞–º–∞.', pattern: 'nko' },
            { id: 'ZAKHAROV_O', label: '–ó–∞—Ö–∞—Ä–æ–≤ –û. –ù.', group: 'transit', info: '–ü—Ä–∏—Ö–æ–¥ –•—Ä–∞–º–∞.', pattern: 'nko' },
            { id: 'ELSUKOVA_Y', label: '–ï–ª—Å—É–∫–æ–≤–∞ –Æ.', group: 'transit', info: '–ü—Ä–∏—Ö–æ–¥ –•—Ä–∞–º–∞.', pattern: 'nko' },
            { id: 'ELSUKOVA_N', label: '–ï–ª—Å—É–∫–æ–≤–∞ –ù.', group: 'transit', info: '–ü—Ä–∏—Ö–æ–¥ –•—Ä–∞–º–∞.', pattern: 'nko' },
            { id: 'BATURINA', label: '–ë–∞—Ç—É—Ä–∏–Ω–∞ –¢.', group: 'transit', info: '–ü—Ä–∏—Ö–æ–¥ –•—Ä–∞–º–∞.', pattern: 'nko' },
            { id: 'PODGORNIY', label: '–ü–æ–¥–≥–æ—Ä–Ω—ã–π –ò.', group: 'transit', info: '–°–≤—è–∑—å —Å –û–ê–û –ù–ü–ó.', pattern: 'empire' },
            { id: 'POGOSYAN', label: '–ü–æ–≥–æ—Å—è–Ω –†. –°.', group: 'transit', info: '–°–≤—è–∑—å —Å –û–ê–û –ù–ü–ó.', pattern: 'empire' },
            { id: 'MUGADAEV', label: '–ú—É–≥–∞–¥–∞–µ–≤ –ú.', group: 'transit', info: '–°–≤—è–∑—å —Å –û–ê–û –ù–ü–ó.', pattern: 'empire' },
            { id: 'KRAVCHENKO', label: '–ö—Ä–∞–≤—á–µ–Ω–∫–æ –ù.', group: 'transit', info: '–°–≤—è–∑—å —Å –û–ê–û –ù–ü–ó.', pattern: 'empire' },
            { id: 'ZAKAEV', label: '–ó–∞–∫–∞–µ–≤ –†. –ì.', group: 'transit', info: '–°–≤—è–∑—å —Å –û–ê–û –ù–ü–ó.', pattern: 'empire' },
            { id: 'BORODAY', label: '–ë–æ—Ä–æ–¥–∞–π –í. –ò.', group: 'transit', info: '–°–≤—è–∑—å —Å –û–ê–û –ù–ü–ó.', pattern: 'empire' },
            
            // --- –ù–û–í–´–ï –°–£–©–ù–û–°–¢–ò (–°–£–î–´, –ë–ê–ù–ö–ò, –§–ù–°) ---
            { id: 'SBERBANK', label: '–ü–ê–û –°–ë–ï–†–ë–ê–ù–ö', group: 'company', info: '–û—Å–Ω–æ–≤–Ω–æ–π –±–∞–Ω–∫ –î–æ–ª–∂–Ω–∏–∫–∞. –û–±–Ω–∞–ª–∏—á–∏–≤–∞–Ω–∏–µ —Å—Ä–µ–¥—Å—Ç–≤.', pattern: 'transit' },
            { id: 'AGAT', label: '–¢–î –ê–ì–ê–¢', group: 'transit', info: '–û–û–û –¢–æ—Ä–≥–æ–≤—ã–π –¥–æ–º –ê–ì–ê–¢. –ö–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç/–ü–æ–ª—É—á–∞—Ç–µ–ª—å.', pattern: 'transit' },
            { id: 'FOND_MEGAPIR', label: '–§–æ–Ω–¥ –ú–ï–ì–ê–ü–ò–†', group: 'hub', info: '–í—Ö–æ–¥–∏—Ç –≤ —Å–µ—Ç—å –ú–µ–≥–∞–ø–∏—Ä.', pattern: 'nko' },
            { id: 'SLEPUKHA', label: '–°–ª–µ–ø—É—Ö–∞ –ö. –û.', group: 'official', info: '–≠–∫—Å-–∫–æ–Ω–∫—É—Ä—Å–Ω—ã–π —É–ø—Ä–∞–≤–ª—è—é—â–∏–π –î–æ–ª–∂–Ω–∏–∫–∞.', pattern: 'core' },
            { id: 'VOLMA', label: '–ö–æ—Ä–ø–æ—Ä–∞—Ü–∏—è –í–û–õ–ú–ê', group: 'company', info: '–í—ã–∫—É–ø–∏–ª–∞ –¥–æ–ª–≥ –§–ù–° (162 –º–ª–Ω —Ä—É–±).', pattern: 'core' },
            { id: 'PSB', label: '–ü—Ä–æ–º—Å–≤—è–∑—å–±–∞–Ω–∫\n(–ö–∏–ø—Ä)', group: 'company', info: '–ë–∞–Ω–∫ –æ—Ñ—à–æ—Ä–∞ PEREYRA LIMITED.', pattern: 'offshore' },
            { id: 'IFNS', label: '–£–§–ù–° / –ò–§–ù–°', group: 'official', info: '–ù–∞–ª–æ–≥–æ–≤—ã–π –æ—Ä–≥–∞–Ω. –í—Å–∫—Ä—ã–ª —Ñ–∏–∫—Ç–∏–≤–Ω—ã–µ —Å–¥–µ–ª–∫–∏.', pattern: 'core' },
            { id: 'AS_VO', label: '–ê—Ä–±–∏—Ç—Ä–∞–∂–Ω—ã–π —Å—É–¥ –í–û', group: 'official', info: '–°—É–¥, —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞—é—â–∏–π –¥–µ–ª–∞ –æ –±–∞–Ω–∫—Ä–æ—Ç—Å—Ç–≤–µ –∏ —É–±—ã—Ç–∫–∞—Ö.', pattern: 'core' },
            { id: 'MURAVIEV', label: '–°—É–¥—å—è –ú—É—Ä–∞–≤—å–µ–≤ –ê.–ê.', group: 'official', info: '–°—É–¥—å—è –ê–° –í–û.', pattern: 'core' },
            { id: 'AKIMOV', label: '–°—É–¥—å—è –ê–∫–∏–º–æ–≤ –ê.–ù.', group: 'official', info: '–°—É–¥—å—è –ê–° –í–û.', pattern: 'core' },
            { id: 'BONDARENKO', label: '–ë–æ–Ω–¥–∞—Ä–µ–Ω–∫–æ –ê.–ê.', group: 'person', info: '–ü—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç–µ–ª—å –ò—Å—Ç—Ü–∞ (–≠–ª—å—Ç–æ–Ω-2).', pattern: 'core' },
            { id: 'MANZHUR', label: '–ú–∞–Ω–∂—É—Ä –ê.–í.', group: 'person', info: '–ü—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç–µ–ª—å –û—Ç–≤–µ—Ç—á–∏–∫–∞ (–≠–ª—å—Ç–æ–Ω-–ú–µ–¥).', pattern: 'core' },
            { id: 'MATYUSHINA', label: '–ú–∞—Ç—é—à–∏–Ω–∞ –ù.–í.', group: 'person', info: '–ü—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç–µ–ª—å –û–û–û –≠–ª—å—Ç–æ–Ω-–ú–µ–¥.', pattern: 'core' },
            { id: 'SHPAK', label: '–®–ø–∞–∫ –ü.–Æ.', group: 'person', info: '–ü—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç–µ–ª—å –ë–æ–≥–¥–∞–Ω–æ–≤–∞ –ê.–í.', pattern: 'core' },
            { id: 'KOMASIN', label: '–ö–æ–º–∞—Å–∏–Ω –ê.–ú.', group: 'person', info: '–ü—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç–µ–ª—å –ö–æ—Ä–ø–æ—Ä–∞—Ü–∏–∏ –í–û–õ–ú–ê.', pattern: 'core' },
            { id: 'ROMANYUK', label: '–†–æ–º–∞–Ω—é–∫ –Æ.–ù.', group: 'person', info: '–ü—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç–µ–ª—å –§–ù–°.', pattern: 'core' },
            { id: 'INVESTSOCBANK', label: '–ò–Ω–≤–µ—Å—Ç—Å–æ—Ü–±–∞–Ω–∫', group: 'company', info: '–ö–∞—Ä–º–∞–Ω–Ω—ã–π –±–∞–Ω–∫ –ß—É–≥—É–Ω–æ–≤—ã—Ö. –û—Å–Ω–æ–≤–Ω–æ–π —Ü–µ–Ω—Ç—Ä —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π.', pattern: 'transit' },
            { id: 'GAZPROMBANK', label: '–ì–∞–∑–ø—Ä–æ–º–±–∞–Ω–∫', group: 'company', info: '–õ–∏—á–Ω—ã–µ —Å—á–µ—Ç–∞ –ß—É–≥—É–Ω–æ–≤–∞ –õ.–°. –¥–ª—è –≤—ã–≤–æ–¥–∞ —Å—Ä–µ–¥—Å—Ç–≤.', pattern: 'transit' }
        ];

        // –û–±—ä–µ–¥–∏–Ω—è–µ–º –±–∞–∑–æ–≤—ã–µ —É–∑–ª—ã —Å OSINT-–¥–∞–Ω–Ω—ã–º–∏ –∏–∑ sf_data.js
        const rawNodesData = [
            ...baseNodesData,
            ...(window.rawNodesData || [])
        ];

        const baseEdgesData = [
            { from: 'CH_L', to: 'SE2', label: '–í–ª–∞–¥–µ–ª–µ—Ü (85%)' }, { from: 'MIKHEEV', to: 'SE2', label: '15% (–≤ –ø—Ä–æ—à–ª–æ–º)' },
            { from: 'BOGD', to: 'SE2', label: '–≠–∫—Å-–¥–∏—Ä–µ–∫—Ç–æ—Ä' }, { from: 'KOL', to: 'SE2', label: '–î–∏—Ä–µ–∫—Ç–æ—Ä' },
            { from: 'ZAKH', to: 'SE2', label: '–ù–æ–º–∏–Ω–∞–ª' }, { from: 'KHAR', to: 'SE2', label: '–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ' },
            { from: 'SE2', to: 'EM', label: '–í—ã–≤–æ–¥ –≤—ã—Ä—É—á–∫–∏' }, { from: 'CH_L', to: 'EM', label: '–ì–µ–Ω–¥–∏—Ä–µ–∫—Ç–æ—Ä' },
            { from: 'BA_I', to: 'EM', label: '–ù–æ–º–∏–Ω–∞–ª (100%)' }, { from: 'CH_A_P', to: 'EM', label: '–≠–∫—Å-–≤–ª–∞–¥–µ–ª–µ—Ü' },
            { from: 'ALT', to: 'EM', label: '–≠–∫—Å-–¥–∏—Ä–µ–∫—Ç–æ—Ä' }, { from: 'MISYURINA', to: 'EM', label: '–î–∏—Ä–µ–∫—Ç–æ—Ä —Ñ–∏–ª.' },
            { from: 'BA_I', to: 'CONF', label: '–£—á—Ä–µ–¥–∏—Ç–µ–ª—å' }, { from: 'KHAR', to: 'EM', label: '–í–∑—ã—Å–∫–∞–Ω–∏–µ —É–±—ã—Ç–∫–æ–≤' },
            { from: 'CH_L', to: 'BA_I', label: '–°—É–ø—Ä—É–≥' }, { from: 'SE2', to: 'MOBRAY', label: '–§–∏–∫—Ç–∏–≤–Ω—ã–π –∑–∞–µ–º' },
            { from: 'CH_A_P', to: 'MOBRAY', label: '–í–ª–∞–¥–µ–ª–µ—Ü' }, { from: 'SE2', to: 'FINWAY', label: '–§–∏–∫—Ç–∏–≤–Ω—ã–π –∑–∞–µ–º' },
            { from: 'SE2', to: 'MARSTEEL', label: '–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–æ–ª–≥–∞' }, { from: 'KOL', to: 'FINWAY', label: '–¶–µ—Å—Å–∏—è' },
            { from: 'KOL', to: 'MARSTEEL', label: '–¶–µ—Å—Å–∏—è' }, { from: 'MARSTEEL', to: 'PEREYRA', label: '–¶–µ—Å—Å–∏—è' },
            { from: 'CH_L', to: 'PASS', label: '–£—á—Ä–µ–¥–∏—Ç–µ–ª—å' }, { from: 'CH_L', to: 'NPZ', label: '–ê–∫—Ü–∏–æ–Ω–µ—Ä' },
            { from: 'ZAKH', to: 'NPZ', label: '–ê–∫—Ü–∏–æ–Ω–µ—Ä' }, { from: 'SHMAL', to: 'NPZ', label: '–ê–∫—Ü–∏–æ–Ω–µ—Ä' },
            { from: 'CH_L', to: 'REV', label: '–£—á—Ä–µ–¥–∏—Ç–µ–ª—å' }, { from: 'BAZHENOV', to: 'REV', label: '–£—á—Ä–µ–¥–∏—Ç–µ–ª—å' },
            { from: 'ANDRAZ', to: 'REV', label: '–£—á—Ä–µ–¥–∏—Ç–µ–ª—å' }, { from: 'CH_L', to: 'MED_SRV', label: '–ö–æ–Ω—Ç—Ä–æ–ª—å' },
            { from: 'CH_L', to: 'CSL', label: '–ö–æ–Ω—Ç—Ä–æ–ª—å' }, { from: 'PASS', to: 'MEGAPIR', label: '–§–∏–Ω–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–∏–µ' },
            { from: 'KANSHIN', to: 'MEGAPIR', label: '–ì–µ–Ω–¥–∏—Ä–µ–∫—Ç–æ—Ä' }, { from: 'MEGAPIR', to: 'SOLDIER_H', label: '–°–µ—Ç—å –ù–ö–û' },
            { from: 'MEGAPIR', to: 'ARMY_CULT', label: '–°–µ—Ç—å –ù–ö–û' }, { from: 'BOGD', to: 'CHURCH', label: '–£—á—Ä–µ–¥–∏—Ç–µ–ª—å' },
            { from: 'ZAKH', to: 'CHURCH', label: '–£—á—Ä–µ–¥–∏—Ç–µ–ª—å' }, { from: 'KAZANOV', to: 'CHURCH', label: '–£—á—Ä–µ–¥–∏—Ç–µ–ª—å' },
            { from: 'BOGD', to: 'ROMANOV', label: '–£—á—Ä–µ–¥–∏—Ç–µ–ª—å' }, { from: 'BOGD_V', to: 'IZUMRUD', label: '–°–≤—è–∑—å' },
            { from: 'BOGD', to: 'BOGD_V', label: '–°—É–ø—Ä—É–≥' }, { from: 'SE2', to: 'SOLOMATINA', label: '–ù–∞–ª–∏—á–Ω–æ—Å—Ç—å' }, 
            { from: 'SE2', to: 'NYRKOVA', label: '–†–∞—Å—á–µ—Ç—ã' }, { from: 'SOLOMATINA', to: 'TSAPINA', label: '–°—É–¥–µ–±–Ω—ã–π –ø—Ä–∏–∫–∞–∑' }, 
            { from: 'SOLOMATINA', to: 'LUEVA', label: '–°—É–¥. –ø—Ä–∏–∫–∞–∑' }, { from: 'SOLOMATINA', to: 'FROLOV_L', label: '–°—É–¥. –ø—Ä–∏–∫–∞–∑' }, 
            { from: 'SOLOMATINA', to: 'FROLOV_A', label: '–°—É–¥. –ø—Ä–∏–∫–∞–∑' }, { from: 'SOLOMATINA', to: 'SETSKO', label: '–°—É–¥. –ø—Ä–∏–∫–∞–∑' }, 
            { from: 'NYRKOVA', to: 'KABLOV', label: '–°—É–¥. –ø—Ä–∏–∫–∞–∑' }, { from: 'NYRKOVA', to: 'TIMAKOV', label: '–°—É–¥. –ø—Ä–∏–∫–∞–∑' },
            { from: 'NYRKOVA', to: 'IP_BIT', label: '–ö–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç' }, { from: 'NYRKOVA', to: 'IP_SUL', label: '–ö–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç' }, 
            { from: 'RECORD', to: 'ANDREEV', label: '–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ' }, { from: 'ANDREEV', to: 'ORION', label: '–ö–æ–Ω—Ç—Ä–æ–ª—å' }, 
            { from: 'ANDREEV', to: 'ZARYA', label: '–ö–æ–Ω—Ç—Ä–æ–ª—å' }, { from: 'ANDREEV', to: 'KASCAD', label: '–ö–æ–Ω—Ç—Ä–æ–ª—å' },
            { from: 'RECORD', to: 'IVANCH', label: '–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ' }, { from: 'IVANCH', to: 'METRO', label: '–ö–æ–Ω—Ç—Ä–æ–ª—å' }, 
            { from: 'IVANCH', to: 'EURO_SRV', label: '–ö–æ–Ω—Ç—Ä–æ–ª—å' }, { from: 'SE2', to: 'TAKTIKA', label: '–ü–µ—Ä–µ–¥–∞—á–∞ –±–∞–∑ 1–°' }, 
            { from: 'BYSTROVA', to: 'TAKTIKA', label: '–£—á—Ä–µ–¥–∏—Ç–µ–ª—å' }, { from: 'BEREZIN', to: 'SE2', label: '–°–≤—è–∑–∞–Ω(–∞)' },
            { from: 'BOGD_V', to: 'CHURCH', label: '–°–≤—è–∑–∞–Ω(–∞)' }, { from: 'BOGD_V', to: 'TASM', label: '–°–≤—è–∑–∞–Ω(–∞)' },
            { from: 'BOGD_V', to: 'AUTOPLUS', label: '–°–≤—è–∑–∞–Ω(–∞)' }, { from: 'KOL', to: 'SAMOROGDA', label: '–°–≤—è–∑–∞–Ω(–∞)' },
            { from: 'ZAKH', to: 'SAMOROGDA', label: '–°–≤—è–∑–∞–Ω(–∞)' }, { from: 'KOL', to: 'VOLGASITY', label: '–°–≤—è–∑–∞–Ω(–∞)' },
            { from: 'KOL', to: 'SOGLASIE', label: '–°–≤—è–∑–∞–Ω(–∞)' }, { from: 'ZAKH', to: 'BARS', label: '–°–≤—è–∑–∞–Ω(–∞)' },
            { from: 'BOGD', to: 'CLUB_VISTREL', label: '–°–≤—è–∑–∞–Ω(–∞)' }, { from: 'BOGD', to: 'FOND_NEVSKY', label: '–°–≤—è–∑–∞–Ω(–∞)' },
            { from: 'BOGD', to: 'VNGS', label: '–°–≤—è–∑–∞–Ω(–∞)' }, { from: 'BOGD', to: 'DVORYANSTVO', label: '–°–≤—è–∑–∞–Ω(–∞)' },
            { from: 'BOGD', to: 'NPZ', label: '–°–≤—è–∑–∞–Ω(–∞)' }, { from: 'BOGD', to: 'OAO_NPZ', label: '–°–≤—è–∑–∞–Ω(–∞)' },
            { from: 'CH_A_P', to: 'CSL', label: '–°–≤—è–∑–∞–Ω(–∞)' }, { from: 'CH_A_P', to: 'AGRO_SELO', label: '–°–≤—è–∑–∞–Ω(–∞)' },
            { from: 'CH_L', to: 'OAO_NPZ', label: '–°–≤—è–∑–∞–Ω(–∞)' }, { from: 'SHMAL', to: 'OAO_NPZ', label: '–°–≤—è–∑–∞–Ω(–∞)' },
            { from: 'OAO_NPZ', to: 'NPZ', label: '–ü—Ä–µ–¥—à–µ—Å—Ç–≤–µ–Ω–Ω–∏–∫' }, { from: 'ZHEBELEV', to: 'CHURCH', label: '–°–≤—è–∑–∞–Ω(–∞)' },
            { from: 'TYUTYUNNIKOV', to: 'CHURCH', label: '–°–≤—è–∑–∞–Ω(–∞)' }, { from: 'PETROV', to: 'CHURCH', label: '–°–≤—è–∑–∞–Ω(–∞)' },
            { from: 'KURZONOVA', to: 'CHURCH', label: '–°–≤—è–∑–∞–Ω(–∞)' }, { from: 'ZAKHAROV_O', to: 'CHURCH', label: '–°–≤—è–∑–∞–Ω(–∞)' },
            { from: 'ELSUKOVA_Y', to: 'CHURCH', label: '–°–≤—è–∑–∞–Ω(–∞)' }, { from: 'ELSUKOVA_N', to: 'CHURCH', label: '–°–≤—è–∑–∞–Ω(–∞)' },
            { from: 'BATURINA', to: 'CHURCH', label: '–°–≤—è–∑–∞–Ω(–∞)' }, { from: 'PODGORNIY', to: 'OAO_NPZ', label: '–°–≤—è–∑–∞–Ω(–∞)' },
            { from: 'POGOSYAN', to: 'OAO_NPZ', label: '–°–≤—è–∑–∞–Ω(–∞)' }, { from: 'MUGADAEV', to: 'OAO_NPZ', label: '–°–≤—è–∑–∞–Ω(–∞)' },
            { from: 'KRAVCHENKO', to: 'OAO_NPZ', label: '–°–≤—è–∑–∞–Ω(–∞)' }, { from: 'ZAKAEV', to: 'OAO_NPZ', label: '–°–≤—è–∑–∞–Ω(–∞)' },
            { from: 'BORODAY', to: 'OAO_NPZ', label: '–°–≤—è–∑–∞–Ω(–∞)' }, 
            
            // –ù–æ–≤—ã–µ —Å–≤—è–∑–∏ –ß—É–≥—É–Ω–æ–≤–∞
            { from: 'CH_L', to: 'DRB', label: '–°–≤—è–∑–∞–Ω(–∞) (–≤ –ø—Ä–æ—à–ª–æ–º)' },
            { from: 'CH_L', to: 'SITE', label: '–°–≤—è–∑–∞–Ω(–∞)' },
            { from: 'CH_L', to: 'HERCULES_OAO', label: '–°–≤—è–∑–∞–Ω(–∞)' },
            { from: 'CH_L', to: 'HERCULES_OOO', label: '–°–≤—è–∑–∞–Ω(–∞)' },
            { from: 'CH_L', to: 'MARYINA_ROSCHA', label: '–°–≤—è–∑–∞–Ω(–∞)' },

            // –°–µ—Ç—å –ú–µ–≥–∞–ø–∏—Ä
            { from: 'MEGAPIR', to: 'DKM1', label: '–°–µ—Ç—å –ù–ö–û' },
            { from: 'MEGAPIR', to: 'PERSPEKTIVA', label: '–°–µ—Ç—å –ù–ö–û' },
            { from: 'MEGAPIR', to: 'OF_BRATSTVO', label: '–°–µ—Ç—å –ù–ö–û' },
            { from: 'MEGAPIR', to: 'ID_MEGAPIR', label: '–°–µ—Ç—å –ù–ö–û' },
            { from: 'MEGAPIR', to: 'MEGAPIR_PLUS', label: '–°–µ—Ç—å –ù–ö–û' },

            // –ú–∞—Å—Å–æ–≤–∫–∞ –°–ê–ú–û–†–û–ì–î–´
            { from: 'SAMOROGDA', to: 'PROKHIM', label: '–°–≤—è–∑–∞–Ω(–∞)' },
            { from: 'SAMOROGDA', to: 'ZEYNALOV', label: '–°–≤—è–∑–∞–Ω(–∞)' },
            { from: 'SAMOROGDA', to: 'TARASENKO', label: '–°–≤—è–∑–∞–Ω(–∞)' },
            { from: 'SAMOROGDA', to: 'POLEVA', label: '–°–≤—è–∑–∞–Ω(–∞)' },
            { from: 'SAMOROGDA', to: 'GONCHAROV', label: '–°–≤—è–∑–∞–Ω(–∞)' },
            { from: 'SAMOROGDA', to: 'SHEVELEVA', label: '–°–≤—è–∑–∞–Ω(–∞)' },
            { from: 'SAMOROGDA', to: 'BELOUSOVA', label: '–°–≤—è–∑–∞–Ω(–∞)' },

            // –°–≤—è–∑–∏ –ë–æ–≥–¥–∞–Ω–æ–≤–∞
            { from: 'ROMANOV', to: 'SIZOV', label: '–°–≤—è–∑–∞–Ω(–∞)' },
            { from: 'ROMANOV', to: 'MEKHANIKOV', label: '–°–≤—è–∑–∞–Ω(–∞)' },
            { from: 'VNGS', to: 'KHIMCHENKO', label: '–°–≤—è–∑–∞–Ω(–∞)' },
            { from: 'VNGS', to: 'KOVALEV', label: '–°–≤—è–∑–∞–Ω(–∞)' },
            { from: 'VNGS', to: 'VORONINA', label: '–°–≤—è–∑–∞–Ω(–∞)' },
            { from: 'CLUB_VISTREL', to: 'BESSUDNOV', label: '–°–≤—è–∑–∞–Ω(–∞)' },

            // --- –ù–û–í–´–ï –°–í–Ø–ó–ò (–°–£–î–´, –ë–ê–ù–ö–ò, –§–ù–°) ---
            { from: 'SE2', to: 'SBERBANK', label: '–†/–° –î–æ–ª–∂–Ω–∏–∫–∞ (—Å—á–µ—Ç)' },
            { from: 'SOLOMATINA', to: 'SBERBANK', label: '–°–Ω—è—Ç–∏–µ/–í–∑–Ω–æ—Å –Ω–∞–ª–∏—á–Ω—ã—Ö' },
            { from: 'SE2', to: 'AGAT', label: '–ü–ª–∞—Ç–µ–ª—å—â–∏–∫' },
            { from: 'PASS', to: 'FOND_MEGAPIR', label: '–£—á—Ä–µ–¥–∏—Ç–µ–ª—å' },
            { from: 'SLEPUKHA', to: 'SE2', label: '–≠–∫—Å-–ö–£ (—Å—É–¥)' },
            { from: 'IFNS', to: 'VOLMA', label: '–£—Å—Ç—É–ø–∫–∞ –¥–æ–ª–≥–∞ (162 –º–ª–Ω)' },
            { from: 'VOLMA', to: 'SE2', label: '–ö—Ä–µ–¥–∏—Ç–æ—Ä (–ø—Ä–∞–≤–æ–ø—Ä–µ–µ–º–Ω–∏–∫ –§–ù–°)' },
            { from: 'PEREYRA', to: 'PSB', label: '–°—á–µ—Ç –æ—Ñ—à–æ—Ä–∞' },
            { from: 'IFNS', to: 'SE2', label: '–ü—Ä–æ–≤–µ—Ä–∫–∞ / –ò—Å—Ç–µ—Ü (—Å—É–¥)' },
            { from: 'AS_VO', to: 'SE2', label: '–°—É–¥ –ø–æ –±–∞–Ω–∫—Ä–æ—Ç—Å—Ç–≤—É' },
            { from: 'MURAVIEV', to: 'AS_VO', label: '–°—É–¥—å—è' },
            { from: 'AKIMOV', to: 'AS_VO', label: '–°—É–¥—å—è' },
            { from: 'BONDARENKO', to: 'SE2', label: '–Æ—Ä–∏—Å—Ç' },
            { from: 'MANZHUR', to: 'EM', label: '–Æ—Ä–∏—Å—Ç' },
            { from: 'MATYUSHINA', to: 'EM', label: '–Æ—Ä–∏—Å—Ç' },
            { from: 'SHPAK', to: 'BOGD', label: '–Æ—Ä–∏—Å—Ç' },
            { from: 'KOMASIN', to: 'VOLMA', label: '–Æ—Ä–∏—Å—Ç' },
            { from: 'ROMANYUK', to: 'IFNS', label: '–Æ—Ä–∏—Å—Ç' },
            { from: 'SE2', to: 'INVESTSOCBANK', label: '–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ (—Å—á–µ—Ç)' },
            { from: 'EM', to: 'INVESTSOCBANK', label: '–°—á–µ—Ç–∞ –∫–æ–º–ø–∞–Ω–∏–∏' },
            { from: 'CH_L', to: 'INVESTSOCBANK', label: '–õ–∏—á–Ω—ã–µ —Å—á–µ—Ç–∞' },
            { from: 'CH_A_P', to: 'INVESTSOCBANK', label: '–õ–∏—á–Ω—ã–µ —Å—á–µ—Ç–∞' },
            { from: 'SE2', to: 'CH_L', label: '–í—ã–≤–æ–¥ (–ì–∞–∑–ø—Ä–æ–º–±–∞–Ω–∫)' },
            { from: 'CH_L', to: 'GAZPROMBANK', label: '–õ–∏—á–Ω—ã–π —Å—á–µ—Ç' }
        ];

        // –û–±—ä–µ–¥–∏–Ω—è–µ–º –±–∞–∑–æ–≤—ã–µ —Ä—ë–±—Ä–∞ —Å OSINT-–¥–∞–Ω–Ω—ã–º–∏ –∏–∑ sf_data.js
        const rawEdgesData = [
            ...baseEdgesData,
            ...(window.rawEdgesData || [])
        ];

        // –ê–õ–ì–û–†–ò–¢–ú –†–ê–°–ö–†–ê–°–ö–ò –†–ï–ë–ï–† (–°–∫—Ä—ã–≤–∞–µ–º —Ç–µ–∫—Å—Ç —Å –ª–∏–Ω–∏–π)
        const processedEdges = rawEdgesData.map(e => {
            let edgeColor = '#555';
            let width = 1.2;
            let isDashed = false;
            const lbl = (e.label || '').toLowerCase();
            
            // –†–∞—Å—à–∏—Ä–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤
            if (lbl.includes('–≤—ã—Ä—É—á') || lbl.includes('—Ñ–∏–Ω–∞–Ω—Å') || lbl.includes('–æ–±–Ω–∞–ª') || lbl.includes('–Ω–∞–ª–∏—á') || lbl.includes('—Å—á–µ—Ç') || lbl.includes('—Ç—Ä–∞–Ω–∑–∞–∫—Ü') || lbl.includes('–≤—ã–≤–æ–¥') || lbl.includes('–ø–ª–∞—Ç–µ–ª—å—â–∏–∫')) { edgeColor = '#10b981'; width = 2.5; }
            else if (lbl.includes('–∑–∞–µ–º') || lbl.includes('–¥–æ–ª–≥') || lbl.includes('—Ü–µ—Å—Å') || lbl.includes('–±–∞–∑') || lbl.includes('—Ä–∞—Å—á–µ—Ç') || lbl.includes('—É—Å—Ç—É–ø–∫–∞')) { edgeColor = '#f59e0b'; width = 2; }
            else if (lbl.includes('—Å—É–¥') || lbl.includes('–∏—Å–∫') || lbl.includes('–≤–∑—ã—Å–∫–∞–Ω') || lbl.includes('–∫—Ä–µ–¥–∏—Ç–æ—Ä') || lbl.includes('–ø—Ä–æ–≤–µ—Ä–∫–∞') || lbl.includes('—é—Ä–∏—Å—Ç') || lbl.includes('—Å—É–¥—å—è')) { edgeColor = '#ef4444'; width = 2; }
            
            if (lbl.includes('–Ω–æ–º–∏') || lbl.includes('—Ñ–∏–∫—Ç') || lbl.includes('–ø—Ä–æ—à–ª–æ–º')) { isDashed = true; }

            return {
                ...e,
                label: undefined,
                title: e.title || e.label,
                width: width,
                color: { color: edgeColor, highlight: '#fff', hover: '#fff' },
                dashes: isDashed
            };
        });

        const nodes = new vis.DataSet(rawNodesData);
        const edges = new vis.DataSet(processedEdges);

        const options = {
            nodes: {
                font: { size: 12, face: 'Inter', color: '#fff', strokeWidth: 4, strokeColor: '#000', multi: 'html' },
                borderWidth: 2, borderWidthSelected: 4,
                shadow: { enabled: true, color: 'rgba(0,0,0,0.8)', size: 10, x: 2, y: 2 }
            },
            edges: {
                smooth: { type: 'continuous', forceDirection: 'none' }, // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –≥–∏–±–∫–∏–µ –ª–∏–Ω–∏–∏
                arrows: { to: { enabled: true, scaleFactor: 0.5 } },
                hoverWidth: 1.5
            },
            groups: {
                bankrupt: { color: { background: '#dc2626', border: '#991b1b', highlight: { background: '#ef4444', border: '#fff' } }, shape: 'hexagon', size: 30, font: {size: 14, bold: true} },
                official: { color: { background: '#0284c7', border: '#0369a1', highlight: { background: '#0ea5e9', border: '#fff' } }, shape: 'star', size: 20 },
                company:  { color: { background: '#10b981', border: '#047857', highlight: { background: '#34d399', border: '#fff' } }, shape: 'square', size: 16 },
                offshore: { color: { background: '#f59e0b', border: '#b45309', highlight: { background: '#fbbf24', border: '#fff' } }, shape: 'square', size: 16 },
                hub:      { color: { background: '#8b5cf6', border: '#6d28d9', highlight: { background: '#a78bfa', border: '#fff' } }, shape: 'diamond', size: 22 },
                person:   { color: { background: '#3b82f6', border: '#1d4ed8', highlight: { background: '#60a5fa', border: '#fff' } }, shape: 'dot', size: 14 },
                transit:  { color: { background: '#64748b', border: '#334155', highlight: { background: '#94a3b8', border: '#fff' } }, shape: 'dot', size: 8 },
                // OSINT groups from SpiderFoot
                osint_ip: { color: { background: '#0891b2', border: '#0e7490', highlight: { background: '#22d3ee', border: '#fff' } }, shape: 'dot', size: 12 },
                osint_domain: { color: { background: '#0ea5e9', border: '#0284c7', highlight: { background: '#7dd3fc', border: '#fff' } }, shape: 'dot', size: 12 },
                osint_email: { color: { background: '#14b8a6', border: '#0d9488', highlight: { background: '#5eead4', border: '#fff' } }, shape: 'dot', size: 12 },
                osint_url: { color: { background: '#10b981', border: '#059669', highlight: { background: '#34d399', border: '#fff' } }, shape: 'dot', size: 12 },
                osint_asn: { color: { background: '#6366f1', border: '#4f46e5', highlight: { background: '#a5b4fc', border: '#fff' } }, shape: 'dot', size: 12 },
                osint_misc: { color: { background: '#78716c', border: '#57534e', highlight: { background: '#a8a29e', border: '#fff' } }, shape: 'dot', size: 10 }
            },
            physics: {
                solver: 'repulsion',
                repulsion: {
                    nodeDistance: 170,     // –£–≤–µ–ª–∏—á–µ–Ω–æ: –¥–∞–µ—Ç –±–æ–ª—å—à–µ –º–µ—Å—Ç–∞ –Ω–æ–≤—ã–º –±–∞–Ω–∫–æ–≤—Å–∫–∏–º –∏ —Å—É–¥–µ–±–Ω—ã–º –∫–ª–∞—Å—Ç–µ—Ä–∞–º
                    centralGravity: 0.05,
                    springLength: 130,     // –£–≤–µ–ª–∏—á–µ–Ω–æ: —É–¥–ª–∏–Ω—è–µ—Ç "–ª—É—á–∏" –æ—Ç —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã—Ö —É–∑–ª–æ–≤
                    springConstant: 0.05,
                    damping: 0.15
                },
                stabilization: { iterations: 400, updateInterval: 50 }
            },
            interaction: { hover: true, tooltipDelay: 200, zoomView: true, dragView: true }
        };

        const network = new vis.Network(document.getElementById('network-container'), { nodes, edges }, options);

        // –î–ò–ù–ê–ú–ò–ß–ï–°–ö–û–ï –£–ü–†–ê–í–õ–ï–ù–ò–ï –†–ê–î–ò–£–°–û–ú (–î–õ–ò–ù–û–ô –õ–£–ß–ï–ô)
        document.getElementById('springLength').addEventListener('input', function(e) {
            const val = parseInt(e.target.value, 10);
            network.setOptions({
                physics: {
                    repulsion: {
                        springLength: val
                    }
                }
            });
            // –ü—Ä–æ–±—É–∂–¥–∞–µ–º —Ñ–∏–∑–∏–∫—É –≥—Ä–∞—Ñ–∞, –µ—Å–ª–∏ –æ–Ω–∞ —É–∂–µ —Å—Ç–∞–±–∏–ª–∏–∑–∏—Ä–æ–≤–∞–ª–∞—Å—å
            network.startSimulation();
        });

        // –§–ò–ö–°–ê–¶–ò–Ø –£–ó–õ–ê –ü–†–ò –ü–ï–†–ï–¢–ê–°–ö–ò–í–ê–ù–ò–ò (PIN NODE)
        network.on("dragStart", function (params) {
            if (params.nodes.length > 0) {
                // –í—Ä–µ–º–µ–Ω–Ω–æ –æ—Ç–∫–ª—é—á–∞–µ–º —Ñ–∏–∫—Å–∞—Ü–∏—é –ø—Ä–∏ –∑–∞—Ö–≤–∞—Ç–µ, —á—Ç–æ–±—ã —É–∑–µ–ª —Å–ª—É—à–∞–ª—Å—è –∫—É—Ä—Å–æ—Ä–∞
                nodes.update(params.nodes.map(id => ({ id: id, fixed: false })));
            }
        });

        network.on("dragEnd", function (params) {
            if (params.nodes.length > 0) {
                // –ñ–µ—Å—Ç–∫–æ —Ñ–∏–∫—Å–∏—Ä—É–µ–º —É–∑–µ–ª (–ø—Ä–∏–±–∏–≤–∞–µ–º –≥–≤–æ–∑–¥—è–º–∏) —Ç–∞–º, –≥–¥–µ –µ–≥–æ –±—Ä–æ—Å–∏–ª–∏
                nodes.update(params.nodes.map(id => ({ id: id, fixed: true })));
            }
        });

        // –ü–û–ò–°–ö –£–ó–õ–ê
        document.getElementById('node-search').addEventListener('input', (e) => {
            const val = e.target.value.toLowerCase();
            if (val.length < 2) { if(val.length === 0) resetView(); return; }
            const found = rawNodesData.find(n => n.label.toLowerCase().includes(val) || (n.info && n.info.toLowerCase().includes(val)));
            if (found) {
                network.focus(found.id, { scale: 1.2, animation: true });
                network.selectNodes([found.id]);
                showNodeInfo(found.id);
            }
        });

        // –ö–õ–ò–ö
        network.on("click", e => {
            if (e.nodes.length > 0) { showNodeInfo(e.nodes[0]); } 
            else { 
                closeSidebar(); 
                if (Array.from(document.querySelectorAll('.nav-btn')).some(b => b.classList.contains('active-filter'))) {
                    document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active-filter'));
                    nodes.update(rawNodesData.map(n => ({ id: n.id, opacity: 1, font: { color: '#fff', strokeColor: '#000' } })));
                    closeReport();
                }
            }
        });

        function showNodeInfo(id) {
            const node = nodes.get(id); if(!node) return;
            const sidebar = document.getElementById('info-sidebar'), header = document.getElementById('sidebar-header'), content = document.getElementById('info-content');
            
            let badgeColor = 'bg-zinc-600';
            if(node.group === 'bankrupt') badgeColor = 'bg-red-600';
            if(node.group === 'company') badgeColor = 'bg-emerald-500';
            if(node.group === 'offshore') badgeColor = 'bg-amber-500';
            if(node.group === 'hub') badgeColor = 'bg-purple-600';
            if(node.group === 'person') badgeColor = 'bg-blue-500';
            // OSINT groups
            if(node.group === 'osint_ip') badgeColor = 'bg-cyan-600';
            if(node.group === 'osint_domain') badgeColor = 'bg-sky-600';
            if(node.group === 'osint_asn') badgeColor = 'bg-indigo-600';
            if(node.group === 'osint_email') badgeColor = 'bg-teal-600';
            if(node.group === 'osint_url') badgeColor = 'bg-emerald-600';
            if(node.group === 'osint_misc') badgeColor = 'bg-stone-600';

            header.innerHTML = `
                <div>
                    <span class="inline-block px-2 py-0.5 rounded text-[9px] font-bold text-white mb-2 uppercase tracking-wider ${badgeColor}">${node.group}</span>
                    <h2 class="text-sm font-bold text-white uppercase tracking-widest">${node.label.replace('\n', ' ')}</h2>
                </div>
            `;
            
            const connected = edges.get({ filter: e => e.from === id || e.to === id });
            const links = connected.map(e => {
                const otherNode = nodes.get(e.from === id ? e.to : e.from);
                const direction = e.from === id ? '‚Üí' : '‚Üê';
                const edgeColor = e.color && e.color.color ? e.color.color : '#666';
                return `
                <div class="p-3 bg-black/40 border border-white/5 rounded-lg mb-2 hover:border-white/20 hover:bg-black/60 cursor-pointer transition-all" onclick="focusOnNode('${otherNode.id}')">
                    <p class="text-[9px] text-zinc-500 uppercase font-bold tracking-widest mb-1 flex items-center gap-2">
                        <span class="w-2 h-0.5 rounded-full" style="background-color: ${edgeColor}"></span> ${direction}
                    </p>
                    <p class="text-xs text-zinc-200 font-medium">${otherNode.label.replace('\n', ' ')}</p>
                </div>`;
            }).join('');
            
            content.innerHTML = `
                <div class="mb-6 p-4 bg-blue-900/10 border border-blue-500/20 rounded-xl">
                    <p class="text-[10px] text-blue-400 uppercase font-black mb-2 tracking-widest">–î–µ—Ç–∞–ª–∏ –æ–±—ä–µ–∫—Ç–∞</p>
                    <p class="text-xs text-zinc-300 font-normal">${node.info}</p>
                </div>
                <h3 class="text-[10px] text-zinc-500 uppercase font-black mb-3 tracking-widest">–°–≤—è–∑–∏ –æ–±—ä–µ–∫—Ç–∞ (${connected.length})</h3>
                <div class="space-y-1">${links}</div>
            `;
            sidebar.classList.remove('hidden');
        }

        function focusOnNode(id) { network.focus(id, { scale: 1.2, animation: true }); network.selectNodes([id]); showNodeInfo(id); }

        function applyFilter(type, btnElement) {
            closeSidebar(); 
            document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active-filter'));
            if(btnElement) btnElement.classList.add('active-filter');

            const report = document.getElementById('analytic-report');
            const targetNodes = rawNodesData.filter(n => n.pattern === type || n.id === 'SE2');
            const targetIds = targetNodes.map(n => n.id);
            
            nodes.update(rawNodesData.map(n => ({
                id: n.id,
                opacity: targetIds.includes(n.id) ? 1 : 0.05, 
                font: { color: targetIds.includes(n.id) ? '#fff' : 'transparent', strokeColor: targetIds.includes(n.id) ? '#000' : 'transparent' }
            })));

            network.fit({ nodes: targetIds, animation: { duration: 800, easingFunction: "easeInOutQuad" } });
            
            report.classList.remove('hidden');
            const titles = { profit: '–ö–∞–Ω–∞–ª: –ó–∞—Ö–≤–∞—Ç –≤—ã—Ä—É—á–∫–∏', offshore: '–ö–∞–Ω–∞–ª: –û—Ñ—à–æ—Ä–Ω–∞—è —Å–µ—Ç—å', empire: '–ò–º–ø–µ—Ä–∏—è –ß—É–≥—É–Ω–æ–≤–∞', nko: '–ö–∞–Ω–∞–ª: –ù–ö–û –∏ –•–∞–±—ã', transit: '–û–±–Ω–∞–ª –∏ –¢—Ä–∞–Ω–∑–∏—Ç', record: '–£–ö –†–µ–∫–æ—Ä–¥ –ö–∞–ø–∏—Ç–∞–ª' };
            const texts = { profit: '–ê–∫–∫—É–º—É–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏–±—ã–ª–∏ —Å–∞–Ω–∞—Ç–æ—Ä–∏—è.', offshore: '–ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ñ–∏–∫—Ç–∏–≤–Ω–æ–π –∑–∞–¥–æ–ª–∂–µ–Ω–Ω–æ—Å—Ç–∏.', empire: '–ê–∫—Ç–∏–≤—ã (–ù–ü–ó, –ø–æ—Å–µ–ª–∫–∏, –º–µ–¥—Ü–µ–Ω—Ç—Ä—ã).', nko: '–°–∫—Ä—ã—Ç–∏–µ –∞–∫—Ç–∏–≤–æ–≤ –≤ —Ñ–æ–Ω–¥–∞—Ö –∏ –ø—Ä–∏—Ö–æ–¥–∞—Ö.', transit: '–í—ã–≤–æ–¥ –Ω–∞–ª–∏—á–Ω–æ—Å—Ç–∏ —á–µ—Ä–µ–∑ –¥—Ä–æ–ø–æ–≤.', record: '–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∏—Ç–Ω—ã–º–∏ –∫–æ–º–ø–∞–Ω–∏—è–º–∏.' };

            document.getElementById('report-title').innerText = titles[type];
            document.getElementById('report-text').innerText = texts[type];
            document.getElementById('report-nodes').innerHTML = targetNodes.filter(n => n.id !== 'SE2').map(n => `<div class="p-2.5 bg-black/40 border border-white/5 rounded-lg text-[10px] text-zinc-300 font-medium hover:bg-white/10 hover:text-white cursor-pointer transition-colors" onclick="focusOnNode('${n.id}')">${n.label.replace('\n', ' ')}</div>`).join('');
        }

        function resetView() {
            document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active-filter'));
            nodes.update(rawNodesData.map(n => ({ 
                id: n.id, 
                opacity: 1, 
                fixed: false, // –û—Ç–∫—Ä–µ–ø–ª—è–µ–º –≤—Å–µ –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —É–∑–ª—ã
                font: { color: '#fff', strokeColor: '#000' } 
            })));
            network.startSimulation(); // –ü—Ä–æ–±—É–∂–¥–∞–µ–º —Ñ–∏–∑–∏–∫—É, —á—Ç–æ–±—ã –≤—Å—ë –≤–µ—Ä–Ω—É–ª–æ—Å—å –Ω–∞ —Å–≤–æ–∏ –æ—Ä–±–∏—Ç—ã
            network.fit({ animation: { duration: 800, easingFunction: "easeInOutQuad" } });
            closeReport(); closeSidebar(); document.getElementById('node-search').value = '';
        }

        function closeSidebar() { document.getElementById('info-sidebar').classList.add('hidden'); network.unselectAll(); }
        function closeReport() { document.getElementById('analytic-report').classList.add('hidden'); }

        // OSINT TOGGLE
        let osintEnabled = false;
        function toggleOsint(btnElement) {
            osintEnabled = !osintEnabled;
            btnElement.classList.toggle('active-filter');

            const osintGroups = ['osint_ip', 'osint_domain', 'osint_email', 'osint_url', 'osint_asn', 'osint_misc'];
            const allNodes = nodes.get();
            const osintNodeIds = allNodes.filter(n => osintGroups.includes(n.group)).map(n => n.id);
            
            console.log('OSINT toggle:', { osintEnabled, totalNodes: allNodes.length, osintNodes: osintNodeIds.length });

            if (osintEnabled) {
                // –°–∫—Ä—ã–≤–∞–µ–º –Ω–µ-OSINT —É–∑–ª—ã (—É–º–µ–Ω—å—à–∞–µ–º —Ä–∞–∑–º–µ—Ä –∏ –¥–µ–ª–∞–µ–º –ø—Ä–æ–∑—Ä–∞—á–Ω—ã–º–∏)
                const updates = allNodes.map(n => {
                    const isOsint = osintGroups.includes(n.group);
                    if (isOsint) {
                        return {
                            id: n.id,
                            color: { background: undefined, border: undefined },
                            size: undefined
                        };
                    } else {
                        return {
                            id: n.id,
                            color: { background: 'rgba(100,100,100,0.02)', border: 'rgba(100,100,100,0.02)' },
                            size: 2
                        };
                    }
                });
                nodes.update(updates);

                if (osintNodeIds.length > 0) {
                    network.fit({ nodes: osintNodeIds, animation: { duration: 800, easingFunction: "easeInOutQuad" } });
                }
            } else {
                // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –≤—Å–µ —É–∑–ª—ã
                const updates = allNodes.map(n => ({
                    id: n.id,
                    color: { background: undefined, border: undefined },
                    size: undefined
                }));
                nodes.update(updates);
                network.fit({ animation: { duration: 800, easingFunction: "easeInOutQuad" } });
            }
        }

        // === PIVOT RADIAL LAYOUT ===
        let pivotLayoutOn = false;

        function isOsintNode(n) {
            return (n.group || '').startsWith('osint_');
        }
        function isAnchor(n) {
            return (n.info || '').toLowerCase().includes('anchor');
        }
        function isInfraHost(n) {
            const lbl = (n.label || n.id || '').toLowerCase();
            return lbl.startsWith('ns') || lbl.startsWith('mx') || lbl.startsWith('emx.') || lbl.startsWith('dns');
        }

        function placeRing(list, radius, startAngle, updates) {
            const n = list.length || 1;
            for (let i = 0; i < list.length; i++) {
                const ang = startAngle + (2 * Math.PI * i) / n;
                const x = Math.round(radius * Math.cos(ang));
                const y = Math.round(radius * Math.sin(ang));
                updates.push({ id: list[i].id, x, y, fixed: { x: true, y: true } });
            }
        }

        function applyPivotRadialLayout() {
            const os = nodes.get({ filter: n => isOsintNode(n) && !n.hidden });

            const asn    = os.filter(n => n.group === 'osint_asn');
            const ip     = os.filter(n => n.group === 'osint_ip');
            const anchor = os.filter(n => isAnchor(n));
            const infra  = os.filter(n => n.group === 'osint_domain' && !isAnchor(n) && isInfraHost(n));
            const other  = os.filter(n =>
                !asn.includes(n) && !ip.includes(n) && !anchor.includes(n) && !infra.includes(n)
            );

            const updates = [];

            if (asn.length === 1) {
                updates.push({ id: asn[0].id, x: 0, y: 0, fixed: { x: true, y: true } });
            } else {
                placeRing(asn, 45, 0, updates);
            }

            placeRing(ip,     150, 0.2, updates);
            placeRing(infra,  240, 0.0, updates);
            placeRing(other,  300, 0.1, updates);
            placeRing(anchor, 380, 0.0, updates);

            nodes.update(updates);
            network.setOptions({ physics: { enabled: false } });
            network.fit({ nodes: os.map(n => n.id), animation: { duration: 600, easingFunction: "easeInOutQuad" } });
        }

        function clearPivotRadialLayout() {
            const os = nodes.get({ filter: n => isOsintNode(n) });
            nodes.update(os.map(n => ({ id: n.id, fixed: false, x: undefined, y: undefined })));
            network.setOptions({ physics: { enabled: true } });
            network.stabilize(200);
            network.fit({ animation: { duration: 600, easingFunction: "easeInOutQuad" } });
        }

        function togglePivotLayout(btn) {
            pivotLayoutOn = !pivotLayoutOn;
            btn.classList.toggle('active-filter', pivotLayoutOn);
            if (pivotLayoutOn) applyPivotRadialLayout();
            else clearPivotRadialLayout();
        }

        // === CLUSTER LAYOUT (–æ—Å—Ç—Ä–æ–≤–∞ –≤–æ–∫—Ä—É–≥ MX/NS) ===
        let clusterOn = false;

        // –¶–µ–Ω—Ç—Ä—ã –∫–ª–∞—Å—Ç–µ—Ä–æ–≤: –ø–æ—á—Ç–∞ + Timeweb
        const CLUSTER_CENTERS = ["mx.yandex.net", "emx.mail.ru", "ns1.timeweb.ru"];
        const CENTER_POS = {
            "mx.yandex.net":  { x: -260, y: 0 },
            "emx.mail.ru":    { x:  260, y: 0 },
            "ns1.timeweb.ru": { x:    0, y: -240 }
        };

        function getClusterForNode(nodeId) {
            // –û–ø—Ä–µ–¥–µ–ª—è–µ–º, –∫ –∫–∞–∫–æ–º—É –∫–ª–∞—Å—Ç–µ—Ä—É –æ—Ç–Ω–æ—Å–∏—Ç—Å—è —É–∑–µ–ª
            const allEdges = edges.get();
            const connected = allEdges.filter(e =>
                (e.from === nodeId || e.to === nodeId) &&
                CLUSTER_CENTERS.includes(e.from === nodeId ? e.to : e.from)
            );
            if (connected.length > 0) {
                const center = connected[0].from === nodeId ? connected[0].to : connected[0].from;
                if (CLUSTER_CENTERS.includes(center)) return center;
            }
            // –î–ª—è —Å–∞–º–∏—Ö —Ü–µ–Ω—Ç—Ä–æ–≤
            if (CLUSTER_CENTERS.includes(nodeId)) return nodeId;
            return null;
        }

        function applyClusterLayout() {
            const os = nodes.get({ filter: n => isOsintNode(n) && !n.hidden });
            const updates = [];

            // 1) –§–∏–∫—Å–∏—Ä—É–µ–º —Ü–µ–Ω—Ç—Ä—ã
            for (const centerId of CLUSTER_CENTERS) {
                const centerNode = os.find(n => n.id === centerId);
                if (centerNode && CENTER_POS[centerId]) {
                    updates.push({
                        id: centerId,
                        x: CENTER_POS[centerId].x,
                        y: CENTER_POS[centerId].y,
                        fixed: { x: true, y: true },
                        size: 25
                    });
                }
            }

            // 2) –†–∞—Å–ø—Ä–µ–¥–µ–ª—è–µ–º —É–∑–ª—ã –≤–æ–∫—Ä—É–≥ —Ü–µ–Ω—Ç—Ä–æ–≤
            const clusters = { "mx.yandex.net": [], "emx.mail.ru": [], "ns1.timeweb.ru": [] };
            for (const node of os) {
                if (CLUSTER_CENTERS.includes(node.id)) continue;
                const cluster = getClusterForNode(node.id);
                if (cluster && clusters[cluster]) {
                    clusters[cluster].push(node);
                }
            }

            // 3) –†–∞–∑–º–µ—â–∞–µ–º –ø–æ –∫—Ä—É–≥—É –≤–æ–∫—Ä—É–≥ –∫–∞–∂–¥–æ–≥–æ —Ü–µ–Ω—Ç—Ä–∞
            const radius = 120;
            for (const [centerId, nodeList] of Object.entries(clusters)) {
                if (nodeList.length === 0) continue;
                const centerPos = CENTER_POS[centerId];
                if (!centerPos) continue;

                const startAngle = centerId === "mx.yandex.net" ? -Math.PI/2 :
                                   centerId === "emx.mail.ru" ? Math.PI/2 : 0;

                for (let i = 0; i < nodeList.length; i++) {
                    const angle = startAngle + (2 * Math.PI * i) / nodeList.length;
                    const x = Math.round(centerPos.x + radius * Math.cos(angle));
                    const y = Math.round(centerPos.y + radius * Math.sin(angle));
                    updates.push({
                        id: nodeList[i].id,
                        x, y,
                        fixed: { x: true, y: true }
                    });
                }
            }

            nodes.update(updates);
            network.setOptions({ physics: { enabled: false } });
            network.fit({ animation: { duration: 600, easingFunction: "easeInOutQuad" } });
        }

        function clearClusterLayout() {
            const os = nodes.get({ filter: n => isOsintNode(n) });
            nodes.update(os.map(n => ({ id: n.id, fixed: false, x: undefined, y: undefined, size: undefined })));
            network.setOptions({ physics: { enabled: true } });
            network.stabilize(200);
            network.fit({ animation: { duration: 600, easingFunction: "easeInOutQuad" } });
        }

        function toggleClusterLayout(btn) {
            clusterOn = !clusterOn;
            if (btn) btn.classList.toggle('active-filter', clusterOn);
            if (clusterOn) applyClusterLayout();
            else clearClusterLayout();
        }

    </script>
</body>
</html>
